(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04809c12","chunk-2d0c51a4"],{"3e51":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"divBox"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"components-container"},[a("el-form",{ref:"pram",attrs:{"label-width":"150px",model:t.pram}},[a("el-form-item",{attrs:{label:"标题",prop:"title",rules:[{required:!0,message:"请填写标题",trigger:["blur","change"]}]}},[a("el-input",{attrs:{placeholder:"标题",maxlength:"100"},model:{value:t.pram.title,callback:function(e){t.$set(t.pram,"title",e)},expression:"pram.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"作者",prop:"author",rules:[{required:!0,message:"请填作者",trigger:["blur","change"]}]}},[a("el-input",{attrs:{placeholder:"作者",maxlength:"20"},model:{value:t.pram.author,callback:function(e){t.$set(t.pram,"author",e)},expression:"pram.author"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文章分类",rules:[{required:!0,message:"请选择分类",trigger:["blur","change"]}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.pram.cid,callback:function(e){t.$set(t.pram,"cid",e)},expression:"pram.cid"}},t._l(t.categoryTreeData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图文封面",prop:"imageInput",rules:[{required:!0,message:"请上传图文封面",trigger:"change"}]}},[a("div",{staticClass:"upLoadPicBox",on:{click:function(e){return t.modalPicTap("1")}}},[t.pram.imageInput?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:t.pram.imageInput}})]):a("div",{staticClass:"upLoad"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]),t._v(" "),a("el-form-item",{attrs:{label:"文章简介",prop:"synopsis",rules:[{required:!0,message:"请填写文章简介",trigger:["blur","change"]}]}},[a("el-input",{attrs:{maxlength:"100",type:"textarea",rows:2,resize:"none",placeholder:"文章简介"},model:{value:t.pram.synopsis,callback:function(e){t.$set(t.pram,"synopsis",e)},expression:"pram.synopsis"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文章内容",prop:"content",rules:[{required:!0,message:"请填写文章内容",trigger:["blur","change"]}]}},[a("Tinymce",{model:{value:t.pram.content,callback:function(e){t.$set(t.pram,"content",e)},expression:"pram.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否Banner"}},[a("el-switch",{model:{value:t.pram.isBanner,callback:function(e){t.$set(t.pram,"isBanner",e)},expression:"pram.isBanner"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否热门"}},[a("el-switch",{model:{value:t.pram.isHot,callback:function(e){t.$set(t.pram,"isHot",e)},expression:"pram.isHot"}})],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["admin:article:update"],expression:"['admin:article:update']"}],attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handerSubmit("pram")}}},[t._v("保存")])],1)],1)],1)])],1)},s=[],r=a("8256"),l=a("651a"),n=a("2423"),o=(a("fca7"),a("785a"),a("5f87")),c=a("61f7"),d={components:{Tinymce:r["a"]},data:function(){return{loading:!1,constants:this.$constants,categoryTreeData:[],categoryProps:{value:"id",label:"name",children:"child",expandTrigger:"hover",checkStrictly:!0,emitPath:!1},pram:{author:null,cid:null,content:"",imageInput:"",isBanner:!1,isHot:null,shareSynopsis:null,shareTitle:null,sort:0,synopsis:null,title:null,url:null,id:null},editData:{},myHeaders:{"X-Token":Object(o["a"])()},editorContentLaebl:""}},created:function(){this.tempRoute=Object.assign({},this.$route)},mounted:function(){this.$route.params.id&&(this.getInfo(),this.setTagsViewTitle()),this.handlerGetCategoryTreeData()},methods:{getInfo:function(){var t=this;l["b"]({id:this.$route.params.id}).then((function(e){t.editData=e,t.hadlerInitEditData()}))},modalPicTap:function(t){var e=this;this.$modalUpload((function(t){e.pram.imageInput=t[0].sattDir}),t,"content")},hadlerInitEditData:function(){if(this.$route.params.id){var t=this.editData,e=t.author,a=t.cid,i=t.content,s=t.imageInput,r=t.isBanner,l=t.isHot,n=t.shareSynopsis,o=t.shareTitle,c=t.sort,d=t.synopsis,m=t.title,h=t.url,u=t.id;this.pram.author=e,this.pram.cid=Number.parseInt(a),this.pram.content=i,this.pram.imageInput=s,this.pram.isBanner=r,this.pram.isHot=l,this.pram.shareSynopsis=n,this.pram.shareTitle=o,this.pram.sort=c,this.pram.synopsis=d,this.pram.title=m,this.pram.url=h,this.pram.id=u}},handlerGetCategoryTreeData:function(){var t=this;l["f"]({type:3,status:""}).then((function(e){t.categoryTreeData=e.list,localStorage.setItem("articleClass",JSON.stringify(e.list))}))},handerSubmit:Object(c["a"])((function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.$route.params.id?e.handlerUpdate():e.handlerSave())}))})),handlerUpdate:function(){var t=this;this.loading=!0,this.pram.cid=Array.isArray(this.pram.cid)?this.pram.cid[0]:this.pram.cid,this.pram.shareTitle=this.pram.title,this.pram.shareSynopsis=this.pram.synopsis,n["d"](this.pram).then((function(e){t.$message.success("编辑文章成功"),t.loading=!1,t.$router.push({path:"/content/articleManager"})})).catch((function(){t.loading=!1}))},handlerSave:function(){var t=this;this.loading=!0,this.pram.cid=Array.isArray(this.pram.cid)?this.pram.cid[0]:this.pram.cid,this.pram.shareTitle=this.pram.title,this.pram.shareSynopsis=this.pram.synopsis,n["a"](this.pram).then((function(e){t.$message.success("新增文章成功"),t.loading=!1,t.$router.push({path:"/content/articleManager"})})).catch((function(){t.loading=!1}))},setTagsViewTitle:function(){var t="编辑文章",e=Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.$route.params.id)});this.$store.dispatch("tagsView/updateVisitedView",e)}}},m=d,h=a("2877"),u=Object(h["a"])(m,i,s,!1,null,"3c08c1f2",null);e["default"]=u.exports},"42a4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"divBox"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"container"},[a("el-form",{attrs:{inline:"",size:"small"}},[a("el-form-item",{attrs:{label:"文章分类："}},[a("el-select",{staticClass:"selWidth",attrs:{clearable:"",placeholder:"请选择文章分类"},on:{change:t.handerSearch},model:{value:t.listPram.cid,callback:function(e){t.$set(t.listPram,"cid",e)},expression:"listPram.cid"}},t._l(t.categoryTreeData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入关键词",size:"small",clearable:""},model:{value:t.listPram.keywords,callback:function(e){t.$set(t.listPram,"keywords",e)},expression:"listPram.keywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:t.handerSearch},slot:"append"})],1)],1)],1)],1),t._v(" "),a("router-link",{attrs:{to:{path:"/content/articleCreat"}}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["admin:article:save"],expression:"['admin:article:save']"}],staticClass:"mr10",attrs:{size:"small",type:"primary"}},[t._v("添加文章")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"table",attrs:{data:t.listData.list,size:"mini","highlight-current-row":"","header-cell-style":{fontWeight:"bold"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{width:"36px",height:"36px"},attrs:{src:t.row.imageInput,"preview-src-list":[t.row.imageInput]}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"visit",label:"文章分类","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("articleTypeFilter")(e.row.cid)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"visit",label:"浏览量","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterEmpty")(e.row.visit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"synopsis",label:"文章简介","show-overflow-tooltip":"","min-width":"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"100",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/content/articleCreat/"+e.row.id}}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["admin:article:info"],expression:"['admin:article:info']"}],staticClass:"mr10",attrs:{size:"small",type:"text"}},[t._v("编辑")])],1),t._v(" "),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["admin:article:delete"],expression:"['admin:article:delete']"}],attrs:{type:"text",size:"small"},on:{click:function(a){return t.handlerDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.listPram.page,"page-sizes":t.constants.page.limit,layout:t.constants.page.layout,total:t.listData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"articleModal",attrs:{visible:t.editDialogConfig.visible,title:0===t.editDialogConfig.isEdit?"创建文章":"编辑文章",top:"1vh",width:"900px","destroy-on-close":"",modal:!1,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.editDialogConfig,"visible",e)}}},[t.editDialogConfig.visible?a("edit",{attrs:{"is-edit":t.editDialogConfig.isEdit,"edit-data":t.editDialogConfig.editData},on:{hideDialog:t.handlerHideDialog}}):t._e()],1)],1)},s=[],r=a("2423"),l=a("651a"),n=(a("fca7"),a("3e51")),o={components:{edit:n["default"]},data:function(){return{constants:this.$constants,listPram:{keywords:null,cid:null,page:1,limit:this.$constants.page.limit[0]},listData:{list:[],total:0},editDialogConfig:{visible:!1,data:{},isEdit:0},listLoading:!0,categoryTreeData:[],categoryProps:{value:"id",label:"name",children:"child",expandTrigger:"hover",checkStrictly:!0,emitPath:!1}}},mounted:function(){this.handlerGetListData(this.listPram),this.handlerGetTreeList()},methods:{handlerGetTreeList:function(){var t=this;l["f"]({type:3,status:""}).then((function(e){t.categoryTreeData=e.list,localStorage.setItem("articleClass",JSON.stringify(e.list))}))},handerSearch:function(){this.listPram.page=1,this.handlerGetListData(this.listPram)},handlerGetListData:function(t){var e=this;this.listLoading=!0,r["c"](t).then((function(t){e.listData=t,e.listLoading=!1}))},handlerOpenEdit:function(t,e){1===t?(this.editDialogConfig.isEdit=1,this.editDialogConfig.editData=e):this.editDialogConfig.isEdit=0,this.editDialogConfig.visible=!0},handlerHideDialog:function(){this.handlerGetListData(this.listPram),this.editDialogConfig.visible=!1},handlerDelete:function(t){var e=this;this.$confirm("确定删除当前数据","提示").then((function(a){r["b"](t).then((function(t){e.$message.success("删除数据成功"),e.handlerGetListData(e.listPram)}))}))},handleSizeChange:function(t){this.listPram.limit=t,this.handlerGetListData(this.listPram)},handleCurrentChange:function(t){this.listPram.page=t,this.handlerGetListData(this.listPram)}}},c=o,d=(a("d680"),a("2877")),m=Object(d["a"])(c,i,s,!1,null,"6242cc69",null);e["default"]=m.exports},d680:function(t,e,a){"use strict";a("de9a")},de9a:function(t,e,a){}}]);